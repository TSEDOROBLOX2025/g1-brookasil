<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G1 - Brookasil</title>
    <style>
        :root { --g1-red: #C4170C; --g1-bg: #f2f2f2; --g1-text: #111; --g1-sub: #666; }
        body { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; margin: 0; background-color: var(--g1-bg); color: var(--g1-text); }
        
        /* Cabe√ßalho Realista */
        header { background-color: var(--g1-red); color: white; padding: 0 20px; display: flex; align-items: center; position: sticky; top: 0; z-index: 1000; height: 50px; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .menu-icon { font-size: 24px; cursor: pointer; margin-right: 20px; font-weight: bold; }
        .logo { font-weight: 900; font-size: 32px; letter-spacing: -2px; }
        .region { margin-left: 10px; font-weight: bold; border-left: 1px solid rgba(255,255,255,0.4); padding-left: 10px; font-size: 16px; text-transform: uppercase; }

        /* Sub-header (Categorias) */
        .sub-header { background: white; border-bottom: 1px solid #ddd; padding: 10px 0; display: flex; justify-content: center; gap: 20px; font-size: 13px; font-weight: bold; }
        .sub-header a { color: var(--g1-red); text-decoration: none; text-transform: uppercase; }

        /* Menu Lateral */
        nav { height: 100%; width: 0; position: fixed; z-index: 2000; top: 0; left: 0; background-color: #fff; overflow-x: hidden; transition: 0.3s; padding-top: 60px; box-shadow: 5px 0 15px rgba(0,0,0,0.1); }
        nav a { padding: 12px 30px; text-decoration: none; font-size: 16px; color: #333; display: block; border-bottom: 1px solid #f5f5f5; cursor: pointer; }
        nav a:hover { color: var(--g1-red); background: #fff8f8; }
        nav .closebtn { position: absolute; top: 10px; right: 25px; font-size: 36px; cursor: pointer; }

        /* Layout */
        .container { max-width: 1000px; margin: 20px auto; padding: 0 15px; }
        .section { display: none; animation: fadeIn 0.4s; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Cards Estilo G1 Novo */
        .card { background: white; margin-bottom: 25px; border-radius: 8px; overflow: hidden; border: 1px solid #eee; transition: transform 0.2s; }
        .card:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .card-content { padding: 25px; cursor: pointer; }
        .tema { color: var(--g1-red); text-transform: uppercase; font-size: 13px; font-weight: 800; margin-bottom: 10px; display: block; }
        .titulo { font-size: 32px; font-weight: 800; line-height: 1.1; margin-bottom: 12px; letter-spacing: -0.5px; }
        .subtitulo { color: var(--g1-sub); font-size: 18px; line-height: 1.4; margin-bottom: 15px; }
        .autor-data { font-size: 13px; color: #888; border-top: 1px solid #f9f9f9; padding-top: 10px; }

        /* Pain√©is */
        .admin-box { background: white; padding: 25px; border-radius: 8px; border-top: 6px solid var(--g1-red); box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 30px; }
        input, textarea, select { width: 100%; padding: 14px; margin: 8px 0; border: 1px solid #ddd; border-radius: 6px; font-size: 15px; }
        .btn-main { background: var(--g1-red); color: white; border: none; padding: 16px; cursor: pointer; font-weight: bold; width: 100%; border-radius: 6px; font-size: 16px; }
        .btn-del { background: #eee; color: #cc0000; border: none; padding: 10px; cursor: pointer; width: 100%; font-weight: bold; border-radius: 0 0 8px 8px; }

        /* Modal Realista */
        #modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 3000; overflow-y: auto; }
        .modal-body { max-width: 800px; margin: 40px auto; padding: 20px; }
        .btn-back { color: var(--g1-red); font-weight: bold; cursor: pointer; text-decoration: none; font-size: 18px; }
    </style>
</head>
<body>

    <header>
        <div class="menu-icon" onclick="openNav()">‚ò∞</div>
        <div class="logo">g1</div>
        <div class="region" id="header-region">BROOKASIL</div>
    </header>

    <div class="sub-header">
        <a onclick="irPara('noticias')">Home</a>
        <a onclick="irPara('noticias')">Pol√≠tica</a>
        <a onclick="irPara('candidatura')">Candidatura</a>
        <a onclick="irPara('filiacao')">Filia√ß√£o</a>
    </div>

    <nav id="mySidebar">
        <a class="closebtn" onclick="closeNav()">&times;</a>
        <a onclick="irPara('noticias')">üè† Home</a>
        <a onclick="irPara('candidatura')">üìù Candidatura CDE</a>
        <a onclick="irPara('filiacao')">ü§ù Filia√ß√£o Partid√°ria</a>
        <hr>
        <a onclick="acessoEquipe('jornalista')" style="color: var(--g1-red);">‚úçÔ∏è Painel do Jornalista</a>
        <a onclick="acessoEquipe('dono')" style="color: #333;">üëë Painel do Dono</a>
    </nav>

    <div class="container">
        
        <div id="panel-dono" class="section">
            <div class="admin-box">
                <h2>Gerenciar Equipe (Dono)</h2>
                <p>Adicione jornalistas para que eles apare√ßam como autores.</p>
                <div style="display:flex; gap:10px;">
                    <input type="text" id="nome-jornalista" placeholder="Nome do novo jornalista">
                    <button onclick="adicionarJornalista()" style="width:200px; background: #222; color:white; border-radius:6px; cursor:pointer;">Adicionar</button>
                </div>
                <div id="lista-jornalistas" style="margin-top:15px; font-size:14px; color:#666;"></div>
                <hr>
                <button onclick="sairPainel()" style="background:none; border:none; color:red; cursor:pointer;">Fechar Painel do Dono</button>
            </div>
        </div>

        <div id="panel-postar" class="section">
            <div class="admin-box">
                <h2 id="post-title">Postar Not√≠cia</h2>
                <input type="text" id="tit" placeholder="T√≠tulo da Not√≠cia (Grande e Impactante)">
                <input type="text" id="sub" placeholder="Subt√≠tulo ou resumo da not√≠cia">
                <textarea id="desc" rows="10" placeholder="Conte√∫do completo da reportagem..."></textarea>
                
                <label>Selecione o Autor:</label>
                <select id="select-autor">
                    <option value="Equipe G1 Brookasil">Equipe G1 Brookasil</option>
                    </select>

                <label>Tema:</label>
                <select id="tem">
                    <option value="Pol√≠tica">Pol√≠tica</option>
                    <option value="Economia">Economia</option>
                    <option value="Cidades">Cidades</option>
                    <option value="Seguran√ßa">Seguran√ßa</option>
                </select>
                <button class="btn-main" onclick="postarNoticia()">PUBLICAR NO G1 BROOKASIL</button>
                <button onclick="sairPainel()" style="margin-top:10px; background:none; border:none; cursor:pointer;">Sair</button>
            </div>
        </div>

        <div id="section-noticias" class="section active">
            <div id="news-feed"></div>
        </div>

        <div id="section-candidatura" class="section">
            <div class="admin-box">
                <h1 style="color: var(--g1-red);">Portal de Candidaturas</h1>
                <p>Siga o tutorial para ingressar na vida pol√≠tica de Brookasil.</p>
                <a href="https://tsedoroblox2025.github.io/candidatura-cde/" target="_blank" class="btn-link">Ir para o Site Oficial</a>
            </div>
        </div>

        <div id="section-filiacao" class="section">
            <div class="admin-box">
                <h1 style="color: var(--g1-red);">Portal de Filia√ß√£o</h1>
                <p>Veja os partidos dispon√≠veis e fa√ßa sua filia√ß√£o.</p>
                <a href="https://tsedoroblox2025.github.io/filia-o.html/" target="_blank" class="btn-link">Ir para o Site Oficial</a>
            </div>
        </div>

    </div>

    <div id="modal">
        <div class="modal-body">
            <a onclick="fecharNoticia()" class="btn-back">‚Üê Voltar para o G1</a>
            <div id="modal-content" style="margin-top:40px;"></div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        const firebaseConfig = { databaseURL: "https://g1-brookasil-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        
        let roleAtiva = null;

        function openNav() { document.getElementById("mySidebar").style.width = "300px"; }
        function closeNav() { document.getElementById("mySidebar").style.width = "0"; }

        function irPara(aba) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('section-' + aba).classList.add('active');
            closeNav();
        }

        function acessoEquipe(tipo) {
            const senha = prompt("Senha de acesso:");
            if (tipo === 'jornalista' && senha === "G1_Brookasil") {
                roleAtiva = "jornalista";
                abrirPainel('panel-postar');
            } else if (tipo === 'dono' && senha === "Brookasil1234") {
                roleAtiva = "dono";
                abrirPainel('panel-dono');
                document.getElementById('panel-postar').classList.add('active'); // Dono v√™ os dois
            } else { alert("Acesso negado."); }
        }

        function abrirPainel(id) {
            irPara('noticias'); // Fica na home para ver o painel
            document.getElementById(id).classList.add('active');
            closeNav();
        }

        function sairPainel() {
            roleAtiva = null;
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById('section-noticias').classList.add('active');
            carregarNoticias();
        }

        // --- SISTEMA DE JORNALISTAS ---
        function adicionarJornalista() {
            const nome = document.getElementById('nome-jornalista').value;
            if(nome) {
                db.ref('equipe').push(nome);
                document.getElementById('nome-jornalista').value = '';
                alert("Jornalista adicionado!");
            }
        }

        function carregarEquipe() {
            db.ref('equipe').on('value', (snap) => {
                const select = document.getElementById('select-autor');
                const lista = document.getElementById('lista-jornalistas');
                select.innerHTML = '<option value="Equipe G1 Brookasil">Equipe G1 Brookasil</option>';
                lista.innerHTML = "<b>Jornalistas Atuais:</b> ";
                snap.forEach(child => {
                    select.innerHTML += `<option value="${child.val()}">${child.val()}</option>`;
                    lista.innerHTML += `${child.val()}, `;
                });
            });
        }

        // --- NOT√çCIAS ---
        function postarNoticia() {
            const t = document.getElementById('tit').value, s = document.getElementById('sub').value, 
                  d = document.getElementById('desc').value, a = document.getElementById('select-autor').value, 
                  m = document.getElementById('tem').value;
            if(t && d) {
                db.ref('noticias').push({ titulo: t, subtitulo: s, descricao: d, autor: a, tema: m, data: Date.now() });
                alert("Not√≠cia Publicada com Sucesso!");
                document.getElementById('tit').value = ''; document.getElementById('desc').value = '';
            }
        }

        function carregarNoticias() {
            const feed = document.getElementById('news-feed');
            db.ref('noticias').on('value', (snapshot) => {
                feed.innerHTML = "";
                let lista = [];
                snapshot.forEach(child => {
                    let d = child.val(); d.id = child.key;
                    lista.push(d);
                });
                lista.reverse().forEach(post => {
                    feed.innerHTML += `
                        <div class="card">
                            <div class="card-content" onclick="lerNoticia('${post.titulo.replace(/'/g, "\\'")}', '${post.autor}', '${post.descricao.replace(/\n/g, '<br>').replace(/'/g, "\\'")}', '${post.tema}')">
                                <span class="tema">${post.tema}</span>
                                <h2 class="titulo">${post.titulo}</h2>
                                <p class="subtitulo">${post.subtitulo}</p>
                                <div class="autor-data">Por <b>${post.autor}</b> | G1 Brookasil</div>
                            </div>
                            ${roleAtiva === 'dono' ? `<button class="btn-del" onclick="excluir('${post.id}')">üóëÔ∏è EXCLUIR</button>` : ''}
                        </div>
                    `;
                });
            });
        }

        function excluir(id) { if(confirm("Apagar permanentemente?")) db.ref('noticias/' + id).remove(); }

        function lerNoticia(t, a, d, m) {
            document.getElementById('modal-content').innerHTML = `
                <span class="tema">${m}</span>
                <h1 style="font-size:42px; font-weight:800; line-height:1;">${t}</h1>
                <p style="color:#666; font-size:16px;">Por <b>${a}</b>, G1 Brookasil</p>
                <hr style="border:0; border-top:1px solid #eee; margin:30px 0;">
                <div style="font-size:20px; line-height:1.6; color:#222">${d}</div>
            `;
            document.getElementById('modal').style.display = "block";
            document.body.style.overflow = "hidden";
        }

        function fecharNoticia() { document.getElementById('modal').style.display = "none"; document.body.style.overflow = "auto"; }

        // Inicializa√ß√£o
        carregarNoticias();
        carregarEquipe();
    </script>
</body>
</html>
